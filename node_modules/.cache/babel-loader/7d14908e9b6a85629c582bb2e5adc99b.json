{"ast":null,"code":"import _defineProperty from\"C:/Users/mitch/Thinkful/flashcard-app/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/mitch/Thinkful/flashcard-app/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/mitch/Thinkful/flashcard-app/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/mitch/Thinkful/flashcard-app/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/mitch/Thinkful/flashcard-app/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useParams,useHistory}from\"react-router-dom\";import CardForm from\"./CardForm\";import BreadCrumb from\"../Home/BreadCrumb\";import{readDeck,readCard,updateCard}from\"../../utils/api/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditCard(){var _useParams=useParams(),deckId=_useParams.deckId,cardId=_useParams.cardId;var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),deck=_useState2[0],setDeck=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),card=_useState4[0],setCard=_useState4[1];//load deck and card\nuseEffect(function(){var loadDeck=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setDeck;_context.next=3;return readDeck(deckId);case 3:_context.t1=_context.sent;return _context.abrupt(\"return\",(0,_context.t0)(_context.t1));case 5:case\"end\":return _context.stop();}}},_callee);}));return function loadDeck(){return _ref.apply(this,arguments);};}();loadDeck();var loadCard=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=setCard;_context2.next=3;return readCard(cardId);case 3:_context2.t1=_context2.sent;return _context2.abrupt(\"return\",(0,_context2.t0)(_context2.t1));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function loadCard(){return _ref2.apply(this,arguments);};}();loadCard();},[deckId,cardId]);//create change handler for form\nvar handleChange=function handleChange(_ref3){var target=_ref3.target;setCard(_objectSpread(_objectSpread({},card),{},_defineProperty({},target.name,target.value)));};//create submit handler to save edits\nvar handleSubmit=function handleSubmit(event){event.preventDefault();function updateCardData(){return _updateCardData.apply(this,arguments);}function _updateCardData(){_updateCardData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return updateCard(card);case 3:history.push(\"/decks/\".concat(deckId));_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);if(!(_context3.t0.name!==\"AbortError\")){_context3.next=10;break;}throw _context3.t0;case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return _updateCardData.apply(this,arguments);}updateCardData();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(BreadCrumb,{link:\"/decks/\".concat(deckId),linkName:\"Deck \".concat(deck.name),pageName:\"Edit Card \".concat(cardId)}),/*#__PURE__*/_jsx(\"div\",{className:\"row w-100\",children:/*#__PURE__*/_jsx(CardForm,{formData:card,handleChange:handleChange,handleSubmit:handleSubmit})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row w-100\",children:[/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),className:\"btn btn-secondary mr-1\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:handleSubmit,children:\"Save\"})]})]});}export default EditCard;","map":{"version":3,"sources":["C:/Users/mitch/Thinkful/flashcard-app/Project_Flashcards_Qualified_1/src/Layout/Cards/EditCard.js"],"names":["React","useState","useEffect","Link","useParams","useHistory","CardForm","BreadCrumb","readDeck","readCard","updateCard","EditCard","deckId","cardId","history","deck","setDeck","card","setCard","loadDeck","loadCard","handleChange","target","name","value","handleSubmit","event","preventDefault","updateCardData","push"],"mappings":"q6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,SAAf,CAA0BC,UAA1B,KAA4C,kBAA5C,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oBAAvB,CACA,OAASC,QAAT,CAAmBC,QAAnB,CAA6BC,UAA7B,KAA+C,uBAA/C,C,wFAEA,QAASC,CAAAA,QAAT,EAAoB,CAChB,eAA0BP,SAAS,EAAnC,CAAQQ,MAAR,YAAQA,MAAR,CAAgBC,MAAhB,YAAgBA,MAAhB,CACA,GAAMC,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CACA,cAAwBJ,QAAQ,CAAC,EAAD,CAAhC,wCAAOc,IAAP,eAAaC,OAAb,eACA,eAAwBf,QAAQ,CAAC,EAAD,CAAhC,yCAAOgB,IAAP,eAAaC,OAAb,eAEA;AACAhB,SAAS,CAAC,UAAM,CACZ,GAAMiB,CAAAA,QAAQ,0FAAG,+IAAYH,OAAZ,uBAA0BR,CAAAA,QAAQ,CAACI,MAAD,CAAlC,sJAAH,kBAARO,CAAAA,QAAQ,0CAAd,CACAA,QAAQ,GACR,GAAMC,CAAAA,QAAQ,2FAAG,qJAAYF,OAAZ,wBAA0BT,CAAAA,QAAQ,CAACI,MAAD,CAAlC,6JAAH,kBAARO,CAAAA,QAAQ,2CAAd,CACAA,QAAQ,GACX,CALQ,CAKN,CAACR,MAAD,CAASC,MAAT,CALM,CAAT,CAOA;AACA,GAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,OAAgB,IAAbC,CAAAA,MAAa,OAAbA,MAAa,CACjCJ,OAAO,gCACAD,IADA,wBAEFK,MAAM,CAACC,IAFL,CAEYD,MAAM,CAACE,KAFnB,GAAP,CAIH,CALD,CAOA;AACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC5BA,KAAK,CAACC,cAAN,GAD4B,QAEbC,CAAAA,cAFa,oJAE5B,gLAEclB,CAAAA,UAAU,CAACO,IAAD,CAFxB,QAGQH,OAAO,CAACe,IAAR,kBAAuBjB,MAAvB,GAHR,wFAKY,aAAMW,IAAN,GAAc,YAL1B,qHAF4B,iDAY5BK,cAAc,GACjB,CAbD,CAeA,mBACI,oCACI,KAAC,UAAD,EAAY,IAAI,kBAAYhB,MAAZ,CAAhB,CAAsC,QAAQ,gBAAUG,IAAI,CAACQ,IAAf,CAA9C,CAAqE,QAAQ,qBAAeV,MAAf,CAA7E,EADJ,cAEI,YAAK,SAAS,CAAE,WAAhB,uBACI,KAAC,QAAD,EAAU,QAAQ,CAAEI,IAApB,CAA0B,YAAY,CAAEI,YAAxC,CAAsD,YAAY,CAAEI,YAApE,EADJ,EAFJ,cAKI,aAAK,SAAS,CAAE,WAAhB,wBACI,KAAC,IAAD,EAAM,EAAE,kBAAab,MAAb,CAAR,CAA+B,SAAS,CAAC,wBAAzC,oBADJ,cAEI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,OAAO,CAAEa,YAA3D,kBAFJ,GALJ,GADJ,CAaH,CAED,cAAed,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, useParams, useHistory } from \"react-router-dom\";\r\nimport CardForm from \"./CardForm\";\r\nimport BreadCrumb from \"../Home/BreadCrumb\";\r\nimport { readDeck, readCard, updateCard } from \"../../utils/api/index\";\r\n\r\nfunction EditCard() {\r\n    const { deckId, cardId }= useParams();\r\n    const history = useHistory();\r\n    const [deck, setDeck] = useState({});\r\n    const [card, setCard] = useState({});\r\n\r\n    //load deck and card\r\n    useEffect(() => {\r\n        const loadDeck = async () => setDeck(await readDeck(deckId));\r\n        loadDeck();\r\n        const loadCard = async () => setCard(await readCard(cardId));\r\n        loadCard();\r\n    }, [deckId, cardId])\r\n\r\n    //create change handler for form\r\n    const handleChange = ({ target }) => {\r\n        setCard({\r\n            ...card,\r\n            [target.name]: target.value\r\n        });\r\n    };\r\n\r\n    //create submit handler to save edits\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        async function updateCardData() {\r\n            try {\r\n                await updateCard(card);\r\n                history.push(`/decks/${deckId}`);\r\n            } catch (error) {\r\n                if (error.name!== \"AbortError\"){\r\n                    throw error;\r\n                }\r\n            }\r\n        }\r\n        updateCardData();\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <BreadCrumb link={`/decks/${deckId}`} linkName={`Deck ${deck.name}`} pageName={`Edit Card ${cardId}`} />\r\n            <div className= \"row w-100\">\r\n                <CardForm formData={card} handleChange={handleChange} handleSubmit={handleSubmit} />\r\n            </div>\r\n            <div className= \"row w-100\">\r\n                <Link to ={`/decks/${deckId}`} className=\"btn btn-secondary mr-1\">Cancel</Link>\r\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={handleSubmit}>Save</button>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default EditCard;"]},"metadata":{},"sourceType":"module"}